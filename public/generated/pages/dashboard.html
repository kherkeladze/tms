<div class="row"><div ng-controller="dashboardCtrl as dashboard" class="col-xs-10 col-xs-push-1 jumbotron" style="margin-top: 10%"><uib-tabset active="activeJustified" justified="true"><uib-tab index="0" heading="Tasks"><div ng-controller="taskListCtrl as tasks" class="list-group" style="margin-top: 20px"><div class="form-group"><label>Filter by status:</label><select ng-model="selectedFilter" ng-options="v for v in tasks.filterStatuses" name="" id="" class="form-control"></select></div><table class="table table-bordered table-striped"><thead><tr><td><a href="#" ng-click="">Title</a></td><td><a href="#" ng-click="">Status</a></td><td><a href="#" ng-click="">Due date</a></td><td><a href="#" ng-click="">Action</a></td></tr></thead><tbody><tr ng-repeat="task in tasks.activeTasks" ng-show="selectedFilter == 'All' || selectedFilter == task.status"><td>{{ task.title }}</td><td><span class="label label-primary">{{ task.status }}</span></td><td>{{ task.dueDate | date:dateFormat}}</td><td><a ng-click="tasks.openModal($index)" class="btn btn-default" href=""><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a> <a ng-click="tasks.openEditModal($index)" class="btn btn-default" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></td></tr></tbody></table></div><div></div></uib-tab><uib-tab index="1" heading="Add new"><div ng-controller="taskManagerCtrl as taskManager"><form style="margin-top: 10px"><div class="form-group"><label>Title:</label><input ng-model="taskManager.taskModel.title" type="text" class="form-control" placeholder="title"></div><div class="form-group"><label>Description:</label><input ng-model="taskManager.taskModel.description" type="text" class="form-control" placeholder="description"></div><div class="form-group"><label>Status:</label><select ng-model="taskManager.taskModel.status" ng-options="v for v in taskManager.statusOptions.values" class="form-control"></select></div><div ng-controller="datepickerCtrl as datepicker" class="form-group row"><div class="col-xs-6"><label>start date:</label><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup="{{datepicker.format}}" ng-model="taskManager.taskModel.startDate" is-open="datepicker.popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="datepicker.open2()"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="col-xs-6"><label>Due date:</label><p class="input-group"><input type="text" class="form-control" uib-datepicker-popup="{{datepicker.format}}" ng-model="taskManager.taskModel.dueDate" is-open="datepicker.popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="datepicker.open1()"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="form-group"><label>Add users:</label><div class="well well-lg"><a ng-click="taskManager.addUserBlock()" class="btn btn-default"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a><div class="row" ng-repeat="userBlock in taskManager.userBlocks"><div class="col-xs-5"><div class="form-group"><label>Select user:</label><select ng-options="v for v in taskManager.users" ng-model="taskManager.taskModel.roles[$index + 1]['user']" class="form-control"></select></div></div><div class="col-xs-5"><div class="form-group"><label>Select role:</label><select ng-model="taskManager.taskModel.roles[$index + 1]['role']" class="form-control"><option>Assignee</option><option>Reviewer</option></select></div></div><div class="col-xs-2"><br><a ng-click="taskManager.removeUserBlock($index)" class="btn btn-danger" style="margin-top:4px">Remove</a></div></div></div></div><button ng-click="taskManager.createTask()" class="btn btn-success">Submit</button></form></div></uib-tab></uib-tabset></div></div><style>.modal-body .comment-box, .desc-box {
        height: 400px;
        overflow-y: auto;
    }</style><script type="text/ng-template" id="myModalContent.html"><div class="modal-header">
        <h3 class="modal-title">{{task.title}}</h3>
    </div>
    <div class="modal-body">

        <div class="row">
            <div class="col-xs-8 comment-box">
                <h3 ng-show="task.comments.length > 0" class="panel-title" style="margin-bottom: 20px">Comments:</h3>
                <h3 ng-show="task.comments.length == 0" class="panel-title" style="margin-bottom: 20px">No comments</h3>

                <div ng-repeat="comment in task.comments | reverse">
                    <div class="list-group">
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">{{comment.author}}</h4>
                            <p class="list-group-item-text">{{comment.comment}}</p>
                        </a>
                    </div>
                </div>

            </div>

            <div class="col-xs-4 desc-box">
                <p class="badge">{{userRole}}</p>

                <div class="panel panel-success"> <div class="panel-heading">
                    <h3 class="panel-title">Description</h3>
                </div>
                    <div class="panel-body">{{task.description}}
                    </div>
                </div>


                <div class="form-group" ng-show="canComment">
                    <label>Write comment:</label>
                    <textarea ng-model="comment" name="" cols="30" rows="5"></textarea>
                    <a ng-click="addComment(task._id)" class="btn btn-success">Add</a>
                </div>

            </div>

        </div>

    </div></script><script type="text/ng-template" id="modalEdit.html"><div class="modal-body">

        <div class="row">
            <div class="col-xs-10 col-xs-push-1">
                <form style="margin-top: 10px">
                    <div class="form-group">
                        <label>Title:</label>
                        <input ng-model="task.title" type="text" class="form-control" placeholder="title">
                    </div>

                    <div class="form-group">
                        <label>Description:</label>
                        <input ng-model="task.description" type="text" class="form-control" placeholder="description">
                    </div>

                    <div class="form-group">
                        <label>Status:</label>
                        <select ng-model="task.status" ng-options="v for v in statusOptions.values" class="form-control">

                        </select>
                    </div>

                    <button ng-click="updateTask()" class="btn btn-success">save</button>

                </form>
            </div>

        </div>

    </div></script>